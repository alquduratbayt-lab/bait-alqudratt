# ุชุญุฏูุซ ูุธุงู ุงูุงุดุชุฑุงูุงุช ูุงูุตูุงุญูุงุช

## ๐ ุงูููุฎุต

ุชู ุชุทููุฑ ูุธุงู ุดุงูู ูุฅุฏุงุฑุฉ ุงูุงุดุชุฑุงูุงุช ูุงูุตูุงุญูุงุช ูู ุงูุชุทุจูู ูุน ุงูุชุญูู ุงููุงูู ูู ููุญุฉ ุงูุชุญูู.

---

## โ ุงูุชุญุฏูุซุงุช ุงููููุฐุฉ

### 1. **ูุงุนุฏุฉ ุงูุจูุงูุงุช**

#### ุงูููู: `admin-dashboard/lib/update-subscription-system.sql`

**ุงูุชุนุฏููุงุช:**
- โ ุฅุถุงูุฉ ุญูู `is_free` ูุฌุฏูู `lessons` (ุชุญุฏูุฏ ุงูุฏุฑูุณ ุงููุฌุงููุฉ)
- โ ุชุญุฏูุซ ุฌุฏูู `banners` ูุฏุนู ุงูุงุณุชูุฏุงู ุงููุฑู (`target_subscriptions`)
- โ ุฅุถุงูุฉ ุญูู `external_link` ููุจุงูุฑุงุช
- โ ุชุญุฏูุซ ุฌุฏูู `subscription_plans` ุจุงูุตูุงุญูุงุช:
  - `can_access_ai_teacher` - ุงููุตูู ูููุนูู ุงูุฐูู
  - `can_access_live_training` - ุงููุตูู ููุชุฏุฑูุจ ุงููุจุงุดุฑ
  - `show_banners` - ุนุฑุถ ุงูุจุงูุฑุงุช
  - `tier_level` - ูุณุชูู ุงูุจุงูุฉ (0=free, 1=basic, 2=premium)
- โ ุฅุถุงูุฉ ุฌุฏูู `training_page_settings` ูุฅุนุฏุงุฏุงุช ุตูุญุฉ ุงูุชุฏุฑูุจ
- โ ุฅุถุงูุฉ ุฌุฏูู `training_sessions` ูุฌุฏุงูู ุงูุชุฏุฑูุจ ุงููุณุชูุจููุฉ
- โ ุฅุถุงูุฉ ุญูู `subscription_tier` ูุฌุฏูู `users`

**ูุชุทุจูู ุงูุชุญุฏูุซุงุช:**
```sql
-- ูู ุจุชุดุบูู ูุฐุง ุงูููู ูู Supabase SQL Editor
-- ุงููุณุงุฑ: admin-dashboard/lib/update-subscription-system.sql
```

---

### 2. **ุฎุฏูุฉ ุงูุงุดุชุฑุงูุงุช**

#### ุงูููู ุงูุฌุฏูุฏ: `src/lib/subscriptionService.js`

**ุงููุธุงุฆู:**
- `getUserSubscription()` - ุฌูุจ ูุนูููุงุช ุงุดุชุฑุงู ุงููุณุชุฎุฏู
- `canAccessAITeacher()` - ุงูุชุญูู ูู ุตูุงุญูุฉ ุงููุนูู ุงูุฐูู
- `canAccessTraining()` - ุงูุชุญูู ูู ุตูุงุญูุฉ ุงูุชุฏุฑูุจ
- `canSeeBanners()` - ุงูุชุญูู ูู ุฑุคูุฉ ุงูุจุงูุฑุงุช
- `getSubscriptionName()` - ุงูุญุตูู ุนูู ุงุณู ุงูุจุงูุฉ ุจุงูุนุฑุจูุฉ
- `isSubscriptionActive()` - ุงูุชุญูู ูู ูุดุงุท ุงูุงุดุชุฑุงู

---

### 3. **ุดุงุดุฉ ุงูุฏุฑูุณ (LessonsScreen)**

#### ุงูุชุญุฏูุซุงุช:
- โ ููุชุฑุฉ ุงูุฏุฑูุณ ุญุณุจ ููุน ุงูุงุดุชุฑุงู
- โ ุนุฑุถ ุฏุฑุณ ูุงุญุฏ ูุฌุงูู ููุท ููุทูุงุจ ุบูุฑ ุงููุดุชุฑููู
- โ ุฅุฐุง ูู ููุฌุฏ ุฏุฑุณ ูุญุฏุฏ ููุฌุงููุ ูุนุฑุถ ุงูุฏุฑุณ ุงูุฃูู

**ุงูููุฏ:**
```javascript
// ุงูุทูุงุจ ุบูุฑ ุงููุดุชุฑููู ูุฑูู ุฏุฑุณ ูุงุญุฏ ููุท
if (userSubscription?.subscription_tier === 'free' || !userSubscription) {
  filteredLessons = data.filter(lesson => lesson.is_free === true).slice(0, 1);
  if (filteredLessons.length === 0 && data.length > 0) {
    filteredLessons = [data[0]];
  }
}
```

---

### 4. **ุดุงุดุฉ ุงููุนูู ุงูุฐูู (AITeacherScreen)**

#### ุงูุชุญุฏูุซุงุช:
- โ ุชูููุฏ ุงููุตูู ูููุดุชุฑููู ููุท (basic, premium)
- โ ุนุฑุถ CustomAlert ุนูุฏ ูุญุงููุฉ ุงููุตูู ุจุฏูู ุงุดุชุฑุงู
- โ ุฒุฑ "ุงุดุชุฑู ุงูุขู" ูููู ูุตูุญุฉ ุงูุจุงูุงุช

**ุงูุฑุณุงูุฉ:**
```
"ุงููุนูู ุงูุฐูู ูุชุงุญ ููุท ูููุดุชุฑููู. 
ุงุดุชุฑู ุงูุขู ููุงุณุชูุงุฏุฉ ูู ูุฐู ุงูููุฒุฉ ุงูุฑุงุฆุนุฉ!"
```

---

## ๐ ุงูุชุญุฏูุซุงุช ุงููุชุจููุฉ

### 1. **ุชุญุฏูุซ HomeScreen**
- [ ] ุฌูุจ ุงูุจุงูุฑุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- [ ] ููุชุฑุฉ ุงูุจุงูุฑุงุช ุญุณุจ `target_subscriptions`
- [ ] ุนุฑุถ ุงูุจุงูุฑุงุช ูู Carousel
- [ ] ูุชุญ ุงูุฑูุงุจุท ุงูุฎุงุฑุฌูุฉ ุนูุฏ ุงูุถุบุท

### 2. **ุฅูุดุงุก TrainingScreen**
- [ ] ุตูุญุฉ ุฌุฏูุฏุฉ ููุชุฏุฑูุจ ุงููุจุงุดุฑ
- [ ] ุงูุชุญูู ูู ุงูุตูุงุญูุงุช ูุจู ุงูุฏุฎูู
- [ ] ุนุฑุถ ุฌุฏุงูู ุงููุฏุฑุณูู (ูููุณุชูุจู)
- [ ] ุฑูุงุจุท Zoom ููุญุตุต ุงููุจุงุดุฑุฉ

### 3. **ุชุญุฏูุซ SubscriptionsScreen**
- [ ] ุนุฑุถ ุงููููุฒุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- [ ] ุฅุถุงูุฉ ููุงุฑูุฉ ุจูู ุงูุจุงูุงุช
- [ ] ุชูุถูุญ ุงูุตูุงุญูุงุช ููู ุจุงูุฉ

### 4. **ุชุญุฏูุซ LessonDetailScreen**
- [ ] ุนุฑุถ ุฑุณุงูุฉ ุงุดุชุฑุงู ุจุนุฏ ุงูุชูุงุก ุงูุฏุฑุณ ุงููุฌุงูู
- [ ] CustomAlert ูุน ุฒุฑ "ุงุดุชุฑู ุงูุขู"

---

## ๐ ุฌุฏูู ุงูุตูุงุญูุงุช

| ุงูููุฒุฉ | Free (ูุฌุงูู) | Basic (ุฃุณุงุณู) | Premium (ูููุฒ) |
|--------|--------------|---------------|----------------|
| ุฏุฑุณ ูุงุญุฏ ูุฌุงูู | โ | โ | โ |
| ุฌููุน ุงูุฏุฑูุณ | โ | โ | โ |
| ุงููุนูู ุงูุฐูู (AI) | โ | โ | โ |
| ุงูุจุงูุฑุงุช ุงูุฅุนูุงููุฉ | ุญุณุจ ุงูุฅุนุฏุงุฏุงุช | ุญุณุจ ุงูุฅุนุฏุงุฏุงุช | ุญุณุจ ุงูุฅุนุฏุงุฏุงุช |
| ุงูุชุฏุฑูุจ ุงููุจุงุดุฑ | โ | โ | โ |
| ุงูุฃุณุฆูุฉ ุงูุชูุงุนููุฉ | ุฏุฑุณ ูุงุญุฏ | ุฌููุน | ุฌููุน |
| ุงูุงูุชุญุงูุงุช | ุฏุฑุณ ูุงุญุฏ | ุฌููุน | ุฌููุน |

---

## ๐ฏ ุฅุนุฏุงุฏุงุช ููุญุฉ ุงูุชุญูู ุงููุทููุจุฉ

### 1. **ุฅุฏุงุฑุฉ ุงูุฏุฑูุณ**
```
ุนูุฏ ุฅุถุงูุฉ/ุชุนุฏูู ุฏุฑุณ:
โ ุฏุฑุณ ูุฌุงูู (checkbox)
```

### 2. **ุฅุฏุงุฑุฉ ุงูุจุงูุฑุงุช**
```
ุนูุฏ ุฅุถุงูุฉ ุจุงูุฑ:
- ุฑูุน ุตูุฑุฉ
- ุฑุงุจุท ุฎุงุฑุฌู (ุงุฎุชูุงุฑู)
- ูุธูุฑ ูู: โ Free โ Basic โ Premium โ ุงููู
```

### 3. **ุฅุฏุงุฑุฉ ุงูุจุงูุงุช**
```
ููู ุจุงูุฉ:
- ุงูุงุณู
- ุงูุณุนุฑ
- ุงููููุฒุงุช (features array)
- โ ููููู ุงููุตูู ูููุนูู ุงูุฐูู
- โ ููููู ุงููุตูู ููุชุฏุฑูุจ ุงููุจุงุดุฑ
- โ ูุฑู ุงูุจุงูุฑุงุช ุงูุฅุนูุงููุฉ
- ูุณุชูู ุงูุจุงูุฉ (0, 1, 2)
```

### 4. **ุฅุฏุงุฑุฉ ุงูุงุดุชุฑุงูุงุช**
```
ุฌุฏูู ุงูุทูุงุจ:
- ุงูุงุณู
- ุฑูู ุงููุงุชู
- ุญุงูุฉ ุงูุงุดุชุฑุงู (Free/Basic/Premium)
- ุชุงุฑูุฎ ุงูุงูุชูุงุก
- [ุฒุฑ: ุชูุนูู ุงุดุชุฑุงู]
  - ุงุฎุชูุงุฑ ุงูุจุงูุฉ
  - ุชุญุฏูุฏ ุชุงุฑูุฎ ุงูุงูุชูุงุก
  - ููุงุญุธุงุช
```

### 5. **ุฅุนุฏุงุฏุงุช ุตูุญุฉ ุงูุชุฏุฑูุจ**
```
- โ ุชูุนูู ุตูุญุฉ ุงูุชุฏุฑูุจ
- ูููู ุงูุฏุฎูู ูู: โ Free โ Basic โ Premium โ ุงููู
- ุงูุนููุงู
- ุงููุตู
```

---

## ๐ ุฎุทูุงุช ุงูุชุทุจูู

### ุงููุฑุญูุฉ 1: ูุงุนุฏุฉ ุงูุจูุงูุงุช โ
1. โ ุชุดุบูู `update-subscription-system.sql`
2. โ ุงูุชุญูู ูู ุฅูุดุงุก ุงูุฌุฏุงูู ูุงูุญููู

### ุงููุฑุญูุฉ 2: ุงูุชุทุจูู (React Native)
1. โ ุฅูุดุงุก `subscriptionService.js`
2. โ ุชุญุฏูุซ `LessonsScreen.js`
3. โ ุชุญุฏูุซ `AITeacherScreen.js`
4. โณ ุชุญุฏูุซ `HomeScreen.js` (ุงูุจุงูุฑุงุช)
5. โณ ุฅูุดุงุก `TrainingScreen.js`
6. โณ ุชุญุฏูุซ `LessonDetailScreen.js`
7. โณ ุชุญุฏูุซ `SubscriptionsScreen.js`
8. โณ ุชุญุฏูุซ `App.js` (ุฅุถุงูุฉ TrainingScreen)

### ุงููุฑุญูุฉ 3: ููุญุฉ ุงูุชุญูู
1. โณ ุฅุถุงูุฉ checkbox "ุฏุฑุณ ูุฌุงูู" ูู ุฅุฏุงุฑุฉ ุงูุฏุฑูุณ
2. โณ ุฅุถุงูุฉ ุตูุญุฉ ุฅุฏุงุฑุฉ ุงูุจุงูุฑุงุช
3. โณ ุชุญุฏูุซ ุตูุญุฉ ุฅุฏุงุฑุฉ ุงูุจุงูุงุช
4. โณ ุฅุถุงูุฉ ุตูุญุฉ ุฅุฏุงุฑุฉ ุงูุงุดุชุฑุงูุงุช
5. โณ ุฅุถุงูุฉ ุตูุญุฉ ุฅุนุฏุงุฏุงุช ุงูุชุฏุฑูุจ

---

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ุงูุฏุฑูุณ ุงููุฌุงููุฉ:**
   - ูุฌุจ ุชุญุฏูุฏ ุฏุฑุณ ูุงุญุฏ ุนูู ุงูุฃูู ููุฌุงูู ูู ููุญุฉ ุงูุชุญูู
   - ุฅุฐุง ูู ููุฌุฏุ ุณูุนุฑุถ ุงูุชุทุจูู ุงูุฏุฑุณ ุงูุฃูู ุชููุงุฆูุงู

2. **ุงูุจุงูุฑุงุช:**
   - ูููู ุงุณุชูุฏุงู ุฃู ุชุฑููุจุฉ ูู ุงูุจุงูุงุช
   - ุงูุฑูุงุจุท ุงูุฎุงุฑุฌูุฉ ุชูุชุญ ูู ุงููุชุตูุญ

3. **ุงููุนูู ุงูุฐูู:**
   - ูุชุงุญ ููุท ูููุดุชุฑููู (basic, premium)
   - ูุธูุฑ ุฑุณุงูุฉ ูุฎุตุตุฉ ููุทูุงุจ ุงููุฌุงูููู

4. **ุงูุชุฏุฑูุจ ุงููุจุงุดุฑ:**
   - ูููู ุงูุชุญูู ุจุงูุตูุงุญูุงุช ูู ููุญุฉ ุงูุชุญูู
   - ุงูุตูุญุฉ ุฌุงูุฒุฉ ููุชุทููุฑ ุงููุณุชูุจูู

---

## ๐ง ุงูุงุฎุชุจุงุฑ

### ุงุฎุชุจุงุฑ ุงูุฏุฑูุณ ุงููุฌุงููุฉ:
1. ุณุฌู ุฏุฎูู ูุทุงูุจ ูุฌุงูู
2. ุงูุชุญ ุฃู ูุงุฏุฉ
3. ุชุฃูุฏ ูู ุธููุฑ ุฏุฑุณ ูุงุญุฏ ููุท

### ุงุฎุชุจุงุฑ ุงููุนูู ุงูุฐูู:
1. ุณุฌู ุฏุฎูู ูุทุงูุจ ูุฌุงูู
2. ุญุงูู ุงูุฏุฎูู ูููุนูู ุงูุฐูู
3. ูุฌุจ ุฃู ุชุธูุฑ ุฑุณุงูุฉ ุงูุงุดุชุฑุงู

### ุงุฎุชุจุงุฑ ุงูุจุงูุฑุงุช:
1. ุฃุถู ุจุงูุฑ ูู ููุญุฉ ุงูุชุญูู
2. ุญุฏุฏ ุงูุจุงูุงุช ุงููุณุชูุฏูุฉ
3. ุชุญูู ูู ุธููุฑู ููุจุงูุงุช ุงูุตุญูุญุฉ ููุท

---

## ๐ ุงูุฏุนู

ุฅุฐุง ูุงุฌูุช ุฃู ูุดููุฉ:
1. ุชุญูู ูู ุชุทุจูู ููู SQL ุจุดูู ุตุญูุญ
2. ุชุฃูุฏ ูู ุชุญุฏูุซ ุญูู `subscription_tier` ูููุณุชุฎุฏููู
3. ุฑุงุฌุน console logs ููุฃุฎุทุงุก

---

**ุชุงุฑูุฎ ุงูุชุญุฏูุซ:** 20 ุฏูุณูุจุฑ 2025
**ุงูุญุงูุฉ:** ููุฏ ุงูุชุทููุฑ (70% ููุชูู)
